{"version":3,"sources":["assets/Bai_8/Scripts/Bai_8.js"],"names":["cc","Class","Component","properties","getServerTime","xmlHttp","XMLHttpRequest","err1","ActiveXObject","err2","err3","alert","open","window","location","href","toString","setRequestHeader","send","Date","getResponseHeader","getTime","getLocalTime","onLoad","promisify","localTime","serverTime","latancy","console","log","fn","checkFunc","Promise","resolve","error","reject","errorr","start"],"mappings":";;;;;;+CACA;;;;;;AADA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE,EAHP;EAOL;EACAC,aARK,2BAQW;IACZ,IAAIC,OAAJ;;IACA,IAAI;MACAA,OAAO,GAAG,IAAIC,cAAJ,EAAV;IACH,CAFD,CAGA,OAAOC,IAAP,EAAa;MACT,IAAI;QACAF,OAAO,GAAG,IAAIG,aAAJ,CAAkB,gBAAlB,CAAV;MACH,CAFD,CAEE,OAAOC,IAAP,EAAa;QACX,IAAI;UACAJ,OAAO,GAAG,IAAIG,aAAJ,CAAkB,mBAAlB,CAAV;QACH,CAFD,CAEE,OAAOE,IAAP,EAAa;UACX;UACAC,KAAK,CAAC,oBAAD,CAAL;QACH;MACJ;IACJ;;IACDN,OAAO,CAACO,IAAR,CAAa,MAAb,EAAqBC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,QAArB,EAArB,EAAsD,KAAtD;IACAX,OAAO,CAACY,gBAAR,CAAyB,cAAzB,EAAyC,WAAzC;IACAZ,OAAO,CAACa,IAAR,CAAa,EAAb;IACA,OAAO,IAAIC,IAAJ,CAASd,OAAO,CAACe,iBAAR,CAA0B,MAA1B,CAAT,EAA4CC,OAA5C,EAAP;EACH,CA7BI;EA+BLC,YA/BK,0BA+BU;IACX,OAAO,IAAIH,IAAJ,GAAWE,OAAX,EAAP;EACH,CAjCI;EAmCCE,MAnCD,oBAmCU;IAAA;;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACa,KAAI,CAACC,SAAL,CAAe,KAAI,CAACF,YAApB,GADb;;YAAA;cACLG,SADK;cAAA;cAAA,OAEc,KAAI,CAACD,SAAL,CAAe,KAAI,CAACpB,aAApB,GAFd;;YAAA;cAELsB,UAFK;cAGLC,OAHK,GAGKD,UAAU,GAAGD,SAHlB;cAIXG,OAAO,CAACC,GAAR,CAAY,cAAcF,OAA1B;;YAJW;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAKd,CAxCI;EA0CLH,SA1CK,qBA0CKM,EA1CL,EA0CS;IACV,OAAO,YAAa;MAChB,IAAI;QACA,IAAIC,SAAS,GAAGD,EAAE,MAAF,mBAAhB;;QACA,IAAIC,SAAS,YAAYC,OAAzB,EAAkC;UAC9B,OAAOD,SAAP;QACH,CAFD,MAEO;UACH,OAAOC,OAAO,CAACC,OAAR,CAAgBF,SAAhB,CAAP;QACH;MACJ,CAPD,CAOE,OAAOG,KAAP,EAAc;QACZ,OAAOF,OAAO,CAACG,MAAR,CAAeC,MAAf,CAAP;MACH;IACJ,CAXD;EAYH,CAvDI;EAyDLC,KAzDK,mBAyDG,CAEP,CA3DI,CA6DL;;AA7DK,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n    getServerTime() {\n        let xmlHttp;\n        try {\n            xmlHttp = new XMLHttpRequest();\n        }\n        catch (err1) {\n            try {\n                xmlHttp = new ActiveXObject('Msxml2.XMLHTTP');\n            } catch (err2) {\n                try {\n                    xmlHttp = new ActiveXObject('Microsoft.XMLHTTP');\n                } catch (err3) {\n                    //AJAX not supported, use CPU time.\n                    alert(\"AJAX not supported\");\n                }\n            }\n        }\n        xmlHttp.open('HEAD', window.location.href.toString(), false);\n        xmlHttp.setRequestHeader(\"Content-Type\", \"text/html\");\n        xmlHttp.send('');\n        return new Date(xmlHttp.getResponseHeader(\"Date\")).getTime()\n    },\n\n    getLocalTime() {\n        return new Date().getTime()\n    },\n\n    async onLoad() {\n        const localTime = await this.promisify(this.getLocalTime)();\n        const serverTime = await this.promisify(this.getServerTime)();\n        const latancy = serverTime - localTime;\n        console.log(\"Độ trễ : \" + latancy)\n    },\n\n    promisify(fn) {\n        return (...args) => {\n            try {\n                let checkFunc = fn(...args);\n                if (checkFunc instanceof Promise) {\n                    return checkFunc;\n                } else {\n                    return Promise.resolve(checkFunc)\n                }\n            } catch (error) {\n                return Promise.reject(errorr)\n            }\n        }\n    },\n\n    start() {\n\n    },\n\n    // update (dt) {},\n});\n"]}